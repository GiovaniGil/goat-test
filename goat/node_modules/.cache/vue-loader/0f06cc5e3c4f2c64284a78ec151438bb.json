{"remainingRequest":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/src/app/schedule/Schedule.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/src/app/schedule/Schedule.vue","mtime":1619131088955},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/cache-loader/dist/cjs.js","mtime":1605287831821},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/babel-loader/lib/index.js","mtime":1611235971933},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/cache-loader/dist/cjs.js","mtime":1605287831821},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/vue-loader/lib/index.js","mtime":1611235974535}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVGltZUlucHV0IGZyb20gJ0FwcC9zY2hlZHVsZS9jb21wb25lbnRzL1RpbWVJbnB1dC52dWUnOwppbXBvcnQgTW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCBWdWVDYWwgZnJvbSAndnVlLWNhbCc7CmltcG9ydCBTY2hlZHVsZVJlcXVlc3QgZnJvbSAnQC9kb21haW4vc2NoZWR1bGUvU2NoZWR1bGVSZXF1ZXN0JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2NoZWR1bGUnLAogIGNvbXBvbmVudHM6IHsgVGltZUlucHV0LCBWdWVDYWwgfSwKICBkYXRhOiAoKSA9PiAoewogICAgICBtZW51SW5pdGlhbERhdGU6IGZhbHNlLAogICAgICBhbGVydDogdHJ1ZSwKICAgICAgbG9hZGluZ0Zvcm06IGZhbHNlLAogICAgICBmb3JtVmFsaWQ6IGZhbHNlLAogICAgICBwYXlsb2FkOiB7CiAgICAgICAgc3RyTmFtZTogJycsCiAgICAgICAgdGV4dERlc2NyaXB0aW9uOiAnJywKICAgICAgICBkYXRlRnJvbTogJycsCiAgICAgICAgc3RyU3RhcnRUaW1lOiAnJywKICAgICAgICBzdHJFbmRUaW1lOiAnJywKICAgICAgICBpbnRXZWVrbHlSZWN1cnJlbmNlOiAwLAogICAgICB9LAogICAgICBib29sUmVjdXJyZW50OiBmYWxzZSwKICAgICAgZXZlbnRzOiBbXSwKICAgICAgZnJvbTogMCAqIDYwLAogICAgICB0bzogMjMgKiA2MCwKICAgICAgZGFpbHlIb3Vyczoge30sCiAgICAgIHNwZWNpYWxIb3Vyczoge30sCiAgICAgIGVycm9yOiAnJywKICB9KSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMubXRkR2V0RXZlbnRzKCk7CiAgICB0aGlzLmRhaWx5SG91cnMgPSB7IGZyb206IHRoaXMuZnJvbSwgdG86IHRoaXMudG8sIGNsYXNzOiAnYnVzaW5lc3MtaG91cnMnIH07CiAgICB0aGlzLnNwZWNpYWxIb3VycyA9IHsKICAgICAgICAxOiB0aGlzLmRhaWx5SG91cnMsCiAgICAgICAgMjogdGhpcy5kYWlseUhvdXJzLAogICAgICAgIDM6IHRoaXMuZGFpbHlIb3VycywKICAgICAgICA0OiB0aGlzLmRhaWx5SG91cnMsCiAgICAgICAgNTogdGhpcy5kYWlseUhvdXJzLAogICAgICAgIDY6IHRoaXMuZGFpbHlIb3VycywKICAgICAgICA3OiB0aGlzLmRhaWx5SG91cnMsCiAgICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBtdGRHZXRFdmVudHMoKSB7CiAgICAgIGNvbnN0IGxvYWRlciA9IHRoaXMuJGxvYWRpbmcuc2hvdygpOwogICAgICBTY2hlZHVsZVJlcXVlc3QKICAgICAgICAubGlzdCgpCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICB0aGlzLmV2ZW50cyA9IGRhdGEuY29udGVudDsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSByZXNwb25zZTsKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIGxvYWRlci5oaWRlKCk7CiAgICAgICAgfSk7ICAgIAogICAgfSwKICAgIG10ZFJlc2V0SW50ZXJ2YWwoKSB7CiAgICAgIHRoaXMucGF5bG9hZC5pbnRXZWVrbHlSZWN1cnJlbmNlID0gMDsKICAgIH0sCiAgICBtdGRGb3JtYXREYXRlKGRhdGUpIHsKICAgICAgaWYgKCFkYXRlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZS5zcGxpdCgnLScpOwogICAgICByZXR1cm4gYCR7ZGF5fS8ke21vbnRofS8ke3llYXJ9YDsKICAgIH0sCiAgICBtdGRWYWxpZGF0ZUZvcm0oKSB7CiAgICAgIHJldHVybiB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKTsKICAgIH0sCiAgICBtdGRTYXZlKCkgewogICAgICBpZiAoIXRoaXMubXRkVmFsaWRhdGVGb3JtKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgbG9hZGVyID0gdGhpcy4kbG9hZGluZy5zaG93KCk7ICAgICAgICAKCiAgICAgIFNjaGVkdWxlUmVxdWVzdAogICAgICAgIC5zYXZlKHRoaXMucGF5bG9hZCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLm10ZENsZWFyRm9ybSgpOwogICAgICAgICAgdGhpcy5tdGRHZXRFdmVudHMoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSByZXNwb25zZTsKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIGxvYWRlci5oaWRlKCk7CiAgICAgICAgfSk7CgogICAgfSwKICAgIG10ZENsZWFyRm9ybSgpIHsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0KCk7CiAgICAgIHRoaXMuYm9vbFJlY3VycmVudCA9IGZhbHNlOwogICAgICB0aGlzLnBheWxvYWQuaW50V2Vla2x5UmVjdXJyZW5jZSA9IDA7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgY3B0ZE1pblRpbWVSdWxlKCkgewogICAgICByZXR1cm4gKHZhbHVlKSA9PiB7CiAgICAgICAgY29uc3QgY29tcGFyaXNvbiA9IHRoaXMucGF5bG9hZC5zdHJTdGFydFRpbWU7CiAgICAgICAgY29uc3QgdGltZVZhbHVlID0gTW9tZW50KHZhbHVlLCAnSEg6bW0nKTsKICAgICAgICBjb25zdCBtaW5UaW1lVmFsdWUgPSBNb21lbnQoY29tcGFyaXNvbiwgJ0hIOm1tJyk7CiAgICAgICAgaWYgKG1pblRpbWVWYWx1ZS5pc0FmdGVyKHRpbWVWYWx1ZSkpIHsKICAgICAgICAgIHJldHVybiBgTyBob3LDoXJpbyBkZXZlIHNlciBtYWlvciBxdWUgJHtjb21wYXJpc29ufWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9OwogICAgfSwKICAgIGNwdGREYXRlRm9ybWF0dGVkOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5tdGRGb3JtYXREYXRlKHRoaXMucGF5bG9hZC5kYXRlRnJvbSk7CiAgICAgIH0sCiAgICAgIHNldCh2YWx1ZSkgewogICAgICAgIHRoaXMucGF5bG9hZC5kYXRlRnJvbSA9IHRoaXMubXRkRm9ybWF0RGF0ZSh2YWx1ZSk7CiAgICAgIH0sCiAgICB9LAogICAgY3B0ZFJlcXVpcmVkUnVsZSgpIHsKICAgICAgcmV0dXJuICh2KSA9PiB7CiAgICAgICAgaWYgKHR5cGVvZiB2ID09PSAnYm9vbGVhbicpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInICYmIHYgPT09IDApIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICEhdiB8fCAnQ2FtcG8gb2JyaWdhdMOzcmlvJzsKICAgICAgfTsKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["Schedule.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Schedule.vue","sourceRoot":"src/app/schedule","sourcesContent":["<template>\n    <v-form\n      ref=\"form\"\n      v-model=\"formValid\"\n      @submit.prevent=\"mtdSave()\"\n    >\n      <v-container>\n        <v-alert\n          v-model=\"alert\"\n          close-text=\"Fechar\"\n          color=\"deep-purple accent-4\"\n          dark\n          dismissible\n        >\n          Criação de atividade esportiva\n        </v-alert>\n        <v-alert\n          v-if=\"error\"\n          close-text=\"Fechar\"\n          color=\"red lighten-2\"\n          dark\n          dismissible\n        >\n          {{ error }}\n        </v-alert>        \n        <v-layout column>\n          <v-row>\n            <v-col cols=\"12\" sm=\"12\">\n            <span>Evento</span>\n              <v-text-field\n                v-model=\"payload.strName\"\n                outlined\n                :rules=\"[cptdRequiredRule]\"\n                clearable\n              />\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col cols=\"12\" sm=\"12\">\n              <span>Descrição</span>\n              <v-textarea\n                v-model=\"payload.textDescription\"\n                outlined\n                :rules=\"[cptdRequiredRule]\"\n                clearable\n              />\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col cols=\"3\">\n              <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                  <span>De:</span>\n\n                    <v-menu\n                      ref=\"menuInitialDate\"\n                      v-model=\"menuInitialDate\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on, attrs }\">\n                        <v-text-field\n                          v-model=\"cptdDateFormatted\"\n                          label=\"Data inicial\"\n                          prepend-icon=\"mdi-calendar\"\n                          readonly\n                          v-bind=\"attrs\"\n                          outlined\n                          v-on=\"on\"\n                          :rules=\"[cptdRequiredRule]\"\n                          clearable\n                        />\n                      </template>\n                      <v-date-picker\n                        v-model=\"payload.dateFrom\"\n                        scrollable\n                        @input=\"menuInitialDate = false\"\n                      />\n                    </v-menu>\n                </v-col>\n                <v-col cols=\"12\" sm=\"12\">\n                  <v-row>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <span>Início</span>\n                      <time-input v-model=\"payload.strStartTime\" :rules=\"[cptdRequiredRule]\"/>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <span>Término</span>\n                      <time-input \n                        v-model=\"payload.strEndTime\" \n                        :rules=\"[ cptdMinTimeRule, cptdRequiredRule ]\"\n                        clearable\n                      />\n                    </v-col>\n                  </v-row>\n                </v-col>\n              </v-row>\n            </v-col>\n\n            <v-col cols=\"3\">\n              <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                  <v-radio-group v-model=\"boolRecurrent\" @change=\"mtdResetInterval()\">\n                    <v-radio\n                      label='Não se repete'\n                      :value=\"false\"\n                    />\n                    <v-radio\n                      label=\"Repetir\"\n                      :value=\"true\"\n                    />\n                  </v-radio-group>\n                </v-col>\n                <v-col cols=\"12\" sm=\"12\">\n                  <span>Intervalo de semanas: {{ payload.intWeeklyRecurrence }}</span>\n                  <v-slider\n                    v-model=\"payload.intWeeklyRecurrence\"\n                    max=\"10\"\n                    min=\"0\"\n                    :disabled=\"!boolRecurrent\"\n                    :loader-height=\"5\"\n                  />\n                </v-col>\n              </v-row>\n            </v-col>\n          </v-row>                   \n        </v-layout>\n        <v-card class=\"elevation-0\">\n          <v-divider />\n          <div\n            class=\"pa-4 d-flex justify-end align-center\"\n          >\n            <div>\n              <v-btn\n                id=\"btnCancelar\"\n                color=\"#6A6E7B\"\n                outlined\n                @click=\"mtdClearForm\"\n              >\n                CANCELAR\n              </v-btn>\n            </div>\n            <div\n              class=\"ml-2\"\n            >\n              <v-btn\n                id=\"btnSalvar\"\n                class=\"white--text\"\n                type=\"submit\"\n                color=\"#2ABD49\"\n                :loading=\"loadingForm\"\n              >\n                SALVAR\n              </v-btn>\n            </div>\n          </div>\n        </v-card>\n        <vue-cal\n          xsmall\n          show-week-numbers\n          :time-from=\"from\"\n          :time-to=\"to\"\n          :disable-views=\"['years', 'year']\"\n          :special-hours=\"specialHours\"\n          :events=\"events\"\n          locale=\"pt-br\"\n          startWeekOnSunday\n          class=\"mb-8\"\n        />\n      </v-container>\n    </v-form>\n</template>\n\n<script>\n\nimport TimeInput from 'App/schedule/components/TimeInput.vue';\nimport Moment from 'moment';\nimport VueCal from 'vue-cal';\nimport ScheduleRequest from '@/domain/schedule/ScheduleRequest';\n\nexport default {\n  name: 'Schedule',\n  components: { TimeInput, VueCal },\n  data: () => ({\n      menuInitialDate: false,\n      alert: true,\n      loadingForm: false,\n      formValid: false,\n      payload: {\n        strName: '',\n        textDescription: '',\n        dateFrom: '',\n        strStartTime: '',\n        strEndTime: '',\n        intWeeklyRecurrence: 0,\n      },\n      boolRecurrent: false,\n      events: [],\n      from: 0 * 60,\n      to: 23 * 60,\n      dailyHours: {},\n      specialHours: {},\n      error: '',\n  }),\n  created () {\n    this.mtdGetEvents();\n    this.dailyHours = { from: this.from, to: this.to, class: 'business-hours' };\n    this.specialHours = {\n        1: this.dailyHours,\n        2: this.dailyHours,\n        3: this.dailyHours,\n        4: this.dailyHours,\n        5: this.dailyHours,\n        6: this.dailyHours,\n        7: this.dailyHours,\n      };\n  },\n  methods: {\n    mtdGetEvents() {\n      const loader = this.$loading.show();\n      ScheduleRequest\n        .list()\n        .then(({ data }) => {\n          this.events = data.content;\n        })\n        .catch((response) => {\n          this.error = response;\n        })\n        .finally(() => {\n          loader.hide();\n        });    \n    },\n    mtdResetInterval() {\n      this.payload.intWeeklyRecurrence = 0;\n    },\n    mtdFormatDate(date) {\n      if (!date) {\n        return null;\n      }\n      const [year, month, day] = date.split('-');\n      return `${day}/${month}/${year}`;\n    },\n    mtdValidateForm() {\n      return this.$refs.form.validate();\n    },\n    mtdSave() {\n      if (!this.mtdValidateForm()) {\n        return;\n      }\n      const loader = this.$loading.show();        \n\n      ScheduleRequest\n        .save(this.payload)\n        .then(() => {\n          this.mtdClearForm();\n          this.mtdGetEvents();\n        })\n        .catch((response) => {\n          this.error = response;\n        })\n        .finally(() => {\n          loader.hide();\n        });\n\n    },\n    mtdClearForm() {\n      this.$refs.form.reset();\n      this.boolRecurrent = false;\n      this.payload.intWeeklyRecurrence = 0;\n    }\n  },\n  computed: {\n    cptdMinTimeRule() {\n      return (value) => {\n        const comparison = this.payload.strStartTime;\n        const timeValue = Moment(value, 'HH:mm');\n        const minTimeValue = Moment(comparison, 'HH:mm');\n        if (minTimeValue.isAfter(timeValue)) {\n          return `O horário deve ser maior que ${comparison}`;\n        }\n        return true;\n      };\n    },\n    cptdDateFormatted: {\n      get() {\n        return this.mtdFormatDate(this.payload.dateFrom);\n      },\n      set(value) {\n        this.payload.dateFrom = this.mtdFormatDate(value);\n      },\n    },\n    cptdRequiredRule() {\n      return (v) => {\n        if (typeof v === 'boolean') {\n          return true;\n        }\n        if (typeof v === 'number' && v === 0) {\n          return true;\n        }\n\n        return !!v || 'Campo obrigatório';\n      };\n    },\n  },\n}\n</script>\n\n<style>\n  .v-slider__track-container{\n      height: 0.25em !important;\n    }\n  .vuecal__event.event {background-color: rgba(246, 229, 141, 1);border: 1px solid rgba(249, 202, 36, 1);color: #333;}\n  .business-hours {\n    background-color: rgba(106, 163, 118, 0.4);\n    border: solid rgb(153, 7, 63);\n    border-width: 2px 0;\n  }\n</style>"]}]}