{"remainingRequest":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/src/app/schedule/Schedule.vue?vue&type=style&index=0&id=9e3da790&scoped=true&lang=css&","dependencies":[{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/src/app/schedule/Schedule.vue","mtime":1619133739604},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/css-loader/dist/cjs.js","mtime":1605287851309},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1611235974535},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/postcss-loader/src/index.js","mtime":1605287851626},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/cache-loader/dist/cjs.js","mtime":1605287831821},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/vue-loader/lib/index.js","mtime":1611235974535}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi52LXNsaWRlcl9fdHJhY2stY29udGFpbmVyewogICAgaGVpZ2h0OiAwLjI1ZW0gIWltcG9ydGFudDsKICB9Ci52dWVjYWxfX2V2ZW50LmV2ZW50IHtiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0NiwgMjI5LCAxNDEsIDEpO2JvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjQ5LCAyMDIsIDM2LCAxKTtjb2xvcjogIzMzMzt9Ci5idXNpbmVzcy1ob3VycyB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxMDYsIDE2MywgMTE4LCAwLjQpOwogIGJvcmRlcjogc29saWQgcmdiKDE1MywgNywgNjMpOwogIGJvcmRlci13aWR0aDogMnB4IDA7Cn0KLnZ1ZWNhbF9fbWVudSAge2JhY2tncm91bmQtY29sb3I6ICM3ODZmYTY7fQo="},{"version":3,"sources":["Schedule.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Schedule.vue","sourceRoot":"src/app/schedule","sourcesContent":["<template>\n    <v-form\n      ref=\"form\"\n      v-model=\"formValid\"\n      @submit.prevent=\"mtdSave()\"\n    >\n      <v-container>\n        <v-alert\n          v-model=\"alert\"\n          close-text=\"Fechar\"\n          color=\"#574b90\"\n          dark\n          dismissible\n        >\n          Criação de atividade esportiva\n        </v-alert>\n        <v-alert\n          v-if=\"error\"\n          close-text=\"Fechar\"\n          color=\"red lighten-2\"\n          dark\n          dismissible\n        >\n          {{ error }}\n        </v-alert>        \n        <v-layout column>\n          <v-row>\n            <v-col cols=\"12\" sm=\"12\">\n            <span>Evento</span>\n              <v-text-field\n                v-model=\"payload.strName\"\n                outlined\n                :rules=\"[cptdRequiredRule]\"\n                clearable\n              />\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col cols=\"12\" sm=\"12\">\n              <span>Descrição</span>\n              <v-textarea\n                v-model=\"payload.textDescription\"\n                outlined\n                :rules=\"[cptdRequiredRule]\"\n                clearable\n              />\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col cols=\"3\">\n              <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                  <span>De:</span>\n\n                    <v-menu\n                      ref=\"menuInitialDate\"\n                      v-model=\"menuInitialDate\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on, attrs }\">\n                        <v-text-field\n                          v-model=\"cptdDateFormatted\"\n                          label=\"Data inicial\"\n                          prepend-icon=\"mdi-calendar\"\n                          readonly\n                          v-bind=\"attrs\"\n                          outlined\n                          v-on=\"on\"\n                          :rules=\"[cptdRequiredRule]\"\n                          clearable\n                        />\n                      </template>\n                      <v-date-picker\n                        v-model=\"payload.dateFrom\"\n                        scrollable\n                        @input=\"menuInitialDate = false\"\n                      />\n                    </v-menu>\n                </v-col>\n                <v-col cols=\"12\" sm=\"12\">\n                  <v-row>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <span>Início</span>\n                      <time-input v-model=\"payload.strStartTime\" :rules=\"[cptdRequiredRule]\"/>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <span>Término</span>\n                      <time-input \n                        v-model=\"payload.strEndTime\" \n                        :rules=\"[ cptdMinTimeRule, cptdRequiredRule ]\"\n                        clearable\n                      />\n                    </v-col>\n                  </v-row>\n                </v-col>\n              </v-row>\n            </v-col>\n\n            <v-col cols=\"3\">\n              <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                  <v-radio-group v-model=\"boolRecurrent\" @change=\"mtdResetInterval()\">\n                    <v-radio\n                      label='Não se repete'\n                      :value=\"false\"\n                    />\n                    <v-radio\n                      label=\"Repetir\"\n                      :value=\"true\"\n                    />\n                  </v-radio-group>\n                </v-col>\n                <v-col cols=\"12\" sm=\"12\">\n                  <span>Intervalo de semanas: {{ payload.intWeeklyRecurrence }}</span>\n                  <v-slider\n                    v-model=\"payload.intWeeklyRecurrence\"\n                    max=\"10\"\n                    min=\"0\"\n                    :disabled=\"!boolRecurrent\"\n                    :loader-height=\"5\"\n                  />\n                </v-col>\n              </v-row>\n            </v-col>\n          </v-row>                   \n        </v-layout>\n        <v-card class=\"elevation-0\">\n          <v-divider />\n          <div\n            class=\"pa-4 d-flex justify-end align-center\"\n          >\n            <div>\n              <v-btn\n                id=\"btnCancelar\"\n                color=\"#6A6E7B\"\n                outlined\n                @click=\"mtdClearForm\"\n              >\n                CANCELAR\n              </v-btn>\n            </div>\n            <div\n              class=\"ml-2\"\n            >\n              <v-btn\n                id=\"btnSalvar\"\n                class=\"white--text\"\n                type=\"submit\"\n                color=\"#786fa6\"\n                :loading=\"loadingForm\"\n              >\n                SALVAR\n              </v-btn>\n            </div>\n          </div>\n        </v-card>\n        <vue-cal\n          xsmall\n          show-week-numbers\n          :time-from=\"from\"\n          :time-to=\"to\"\n          :disable-views=\"['years', 'year']\"\n          :special-hours=\"specialHours\"\n          :events=\"events\"\n          locale=\"pt-br\"\n          startWeekOnSunday\n          class=\"mb-8\"\n        />\n      </v-container>\n    </v-form>\n</template>\n\n<script>\n\nimport TimeInput from 'App/schedule/components/TimeInput.vue';\nimport Moment from 'moment';\nimport VueCal from 'vue-cal';\nimport ScheduleRequest from '@/domain/schedule/ScheduleRequest';\n\nexport default {\n  name: 'Schedule',\n  components: { TimeInput, VueCal },\n  data: () => ({\n      menuInitialDate: false,\n      alert: true,\n      loadingForm: false,\n      formValid: false,\n      payload: {\n        strName: '',\n        textDescription: '',\n        dateFrom: '',\n        strStartTime: '',\n        strEndTime: '',\n        intWeeklyRecurrence: 0,\n      },\n      boolRecurrent: false,\n      events: [],\n      from: 0 * 60,\n      to: 23 * 60,\n      dailyHours: {},\n      specialHours: {},\n      error: '',\n  }),\n  created () {\n\n    this.mtdGetEvents();\n    this.dailyHours = { from: this.from, to: this.to, class: 'business-hours' };\n    this.specialHours = {\n        1: this.dailyHours,\n        2: this.dailyHours,\n        3: this.dailyHours,\n        4: this.dailyHours,\n        5: this.dailyHours,\n        6: this.dailyHours,\n        7: this.dailyHours,\n      };\n  },\n  methods: {\n    mtdGetEvents() {\n      const loader = this.$loading.show();\n      ScheduleRequest\n        .list()\n        .then(({ data }) => {\n          this.events = data.content;\n        })\n        .catch((response) => {\n          this.error = response;\n        })\n        .finally(() => {\n          loader.hide();\n        });    \n    },\n    mtdResetInterval() {\n      this.payload.intWeeklyRecurrence = 0;\n    },\n    mtdFormatDate(date) {\n      if (!date) {\n        return null;\n      }\n      const [year, month, day] = date.split('-');\n      return `${day}/${month}/${year}`;\n    },\n    mtdValidateForm() {\n      return this.$refs.form.validate();\n    },\n    mtdSave() {               \n\n      if (!this.mtdValidateForm()) {\n        return;\n      }\n      const loader = this.$loading.show();        \n\n      ScheduleRequest\n        .save(this.payload)\n        .then(() => {\n          this.mtdGetEvents();\n          this.mtdClearForm();\n          this.$toasted.success('Registro salvo com sucesso!!!', {position: \"top-center\", duration : 5000}); \n        })\n        .catch((response) => {\n          this.error = response;\n        })\n        .finally(() => {\n          loader.hide();\n        });\n\n    },\n    mtdClearForm() {\n      this.$refs.form.reset();\n      this.boolRecurrent = false;\n      this.payload.intWeeklyRecurrence = 0;\n    }\n  },\n  computed: {\n    cptdMinTimeRule() {\n      return (value) => {\n        const comparison = this.payload.strStartTime;\n        const timeValue = Moment(value, 'HH:mm');\n        const minTimeValue = Moment(comparison, 'HH:mm');\n        if (minTimeValue.isAfter(timeValue)) {\n          return `O horário deve ser maior que ${comparison}`;\n        }\n        return true;\n      };\n    },\n    cptdDateFormatted: {\n      get() {\n        return this.mtdFormatDate(this.payload.dateFrom);\n      },\n      set(value) {\n        this.payload.dateFrom = this.mtdFormatDate(value);\n      },\n    },\n    cptdRequiredRule() {\n      return (v) => {\n        if (typeof v === 'boolean') {\n          return true;\n        }\n        if (typeof v === 'number' && v === 0) {\n          return true;\n        }\n\n        return !!v || 'Campo obrigatório';\n      };\n    },\n  },\n}\n</script>\n\n<style scoped>\n  .v-slider__track-container{\n      height: 0.25em !important;\n    }\n  .vuecal__event.event {background-color: rgba(246, 229, 141, 1);border: 1px solid rgba(249, 202, 36, 1);color: #333;}\n  .business-hours {\n    background-color: rgba(106, 163, 118, 0.4);\n    border: solid rgb(153, 7, 63);\n    border-width: 2px 0;\n  }\n  .vuecal__menu  {background-color: #786fa6;}\n</style>"]}]}