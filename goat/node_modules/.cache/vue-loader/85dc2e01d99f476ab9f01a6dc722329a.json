{"remainingRequest":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/src/app/schedule/Schedule.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/src/app/schedule/Schedule.vue","mtime":1619134935780},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/cache-loader/dist/cjs.js","mtime":1605287831821},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/babel-loader/lib/index.js","mtime":1611235971933},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/cache-loader/dist/cjs.js","mtime":1605287831821},{"path":"/home/giovani/Documentos/Projetos/code/vue/bitbucket/goat/node_modules/vue-loader/lib/index.js","mtime":1611235974535}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVGltZUlucHV0IGZyb20gJ0FwcC9zY2hlZHVsZS9jb21wb25lbnRzL1RpbWVJbnB1dC52dWUnOwppbXBvcnQgTW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCBWdWVDYWwgZnJvbSAndnVlLWNhbCc7CmltcG9ydCBTY2hlZHVsZVJlcXVlc3QgZnJvbSAnQC9kb21haW4vc2NoZWR1bGUvU2NoZWR1bGVSZXF1ZXN0JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2NoZWR1bGUnLAogIGNvbXBvbmVudHM6IHsgVGltZUlucHV0LCBWdWVDYWwgfSwKICBkYXRhOiAoKSA9PiAoewogICAgICBtZW51SW5pdGlhbERhdGU6IGZhbHNlLAogICAgICBhbGVydDogdHJ1ZSwKICAgICAgbG9hZGluZ0Zvcm06IGZhbHNlLAogICAgICBmb3JtVmFsaWQ6IGZhbHNlLAogICAgICBwYXlsb2FkOiB7CiAgICAgICAgc3RyTmFtZTogJycsCiAgICAgICAgdGV4dERlc2NyaXB0aW9uOiAnJywKICAgICAgICBkYXRlRnJvbTogJycsCiAgICAgICAgc3RyU3RhcnRUaW1lOiAnJywKICAgICAgICBzdHJFbmRUaW1lOiAnJywKICAgICAgICBpbnRXZWVrbHlSZWN1cnJlbmNlOiAwLAogICAgICB9LAogICAgICBib29sUmVjdXJyZW50OiBmYWxzZSwKICAgICAgZXZlbnRzOiBbXSwKICAgICAgZnJvbTogMCAqIDYwLAogICAgICB0bzogMjMgKiA2MCwKICAgICAgZGFpbHlIb3Vyczoge30sCiAgICAgIHNwZWNpYWxIb3Vyczoge30sCiAgICAgIGVycm9yOiAnJywKICB9KSwKICBjcmVhdGVkICgpIHsKCiAgICB0aGlzLm10ZEdldEV2ZW50cygpOwogICAgdGhpcy5kYWlseUhvdXJzID0geyBmcm9tOiB0aGlzLmZyb20sIHRvOiB0aGlzLnRvLCBjbGFzczogJ2J1c2luZXNzLWhvdXJzJyB9OwogICAgdGhpcy5zcGVjaWFsSG91cnMgPSB7CiAgICAgICAgMTogdGhpcy5kYWlseUhvdXJzLAogICAgICAgIDI6IHRoaXMuZGFpbHlIb3VycywKICAgICAgICAzOiB0aGlzLmRhaWx5SG91cnMsCiAgICAgICAgNDogdGhpcy5kYWlseUhvdXJzLAogICAgICAgIDU6IHRoaXMuZGFpbHlIb3VycywKICAgICAgICA2OiB0aGlzLmRhaWx5SG91cnMsCiAgICAgICAgNzogdGhpcy5kYWlseUhvdXJzLAogICAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbXRkR2V0RXZlbnRzKCkgewogICAgICBjb25zdCBsb2FkZXIgPSB0aGlzLiRsb2FkaW5nLnNob3coKTsKICAgICAgU2NoZWR1bGVSZXF1ZXN0CiAgICAgICAgLmxpc3QoKQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgdGhpcy5ldmVudHMgPSBkYXRhLmNvbnRlbnQ7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmVycm9yID0gcmVzcG9uc2U7CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICBsb2FkZXIuaGlkZSgpOwogICAgICAgIH0pOyAgICAKICAgIH0sCiAgICBtdGRSZXNldEludGVydmFsKCkgewogICAgICB0aGlzLnBheWxvYWQuaW50V2Vla2x5UmVjdXJyZW5jZSA9IDA7CiAgICB9LAogICAgbXRkRm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgIGlmICghZGF0ZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IGRhdGUuc3BsaXQoJy0nKTsKICAgICAgcmV0dXJuIGAke2RheX0vJHttb250aH0vJHt5ZWFyfWA7CiAgICB9LAogICAgbXRkVmFsaWRhdGVGb3JtKCkgewogICAgICByZXR1cm4gdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCk7CiAgICB9LAogICAgbXRkU2F2ZSgpIHsgICAgICAgICAgICAgICAKCiAgICAgIGlmICghdGhpcy5tdGRWYWxpZGF0ZUZvcm0oKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBsb2FkZXIgPSB0aGlzLiRsb2FkaW5nLnNob3coKTsgICAgICAgIAoKICAgICAgU2NoZWR1bGVSZXF1ZXN0CiAgICAgICAgLnNhdmUodGhpcy5wYXlsb2FkKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMubXRkR2V0RXZlbnRzKCk7CiAgICAgICAgICB0aGlzLm10ZENsZWFyRm9ybSgpOwogICAgICAgICAgdGhpcy4kdG9hc3RlZC5zdWNjZXNzKCdSZWdpc3RybyBzYWx2byBjb20gc3VjZXNzbyEhIScsIHtwb3NpdGlvbjogInRvcC1jZW50ZXIiLCBkdXJhdGlvbiA6IDUwMDB9KTsgCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmVycm9yID0gcmVzcG9uc2U7CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICBsb2FkZXIuaGlkZSgpOwogICAgICAgIH0pOwoKICAgIH0sCiAgICBtdGRDbGVhckZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwogICAgICB0aGlzLmJvb2xSZWN1cnJlbnQgPSBmYWxzZTsKICAgICAgdGhpcy5wYXlsb2FkLmludFdlZWtseVJlY3VycmVuY2UgPSAwOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNwdGRNaW5UaW1lUnVsZSgpIHsKICAgICAgcmV0dXJuICh2YWx1ZSkgPT4gewogICAgICAgIGNvbnN0IGNvbXBhcmlzb24gPSB0aGlzLnBheWxvYWQuc3RyU3RhcnRUaW1lOwogICAgICAgIGNvbnN0IHRpbWVWYWx1ZSA9IE1vbWVudCh2YWx1ZSwgJ0hIOm1tJyk7CiAgICAgICAgY29uc3QgbWluVGltZVZhbHVlID0gTW9tZW50KGNvbXBhcmlzb24sICdISDptbScpOwogICAgICAgIGlmIChtaW5UaW1lVmFsdWUuaXNBZnRlcih0aW1lVmFsdWUpKSB7CiAgICAgICAgICByZXR1cm4gYE8gaG9yw6FyaW8gZGV2ZSBzZXIgbWFpb3IgcXVlICR7Y29tcGFyaXNvbn1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfTsKICAgIH0sCiAgICBjcHRkRGF0ZUZvcm1hdHRlZDogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubXRkRm9ybWF0RGF0ZSh0aGlzLnBheWxvYWQuZGF0ZUZyb20pOwogICAgICB9LAogICAgICBzZXQodmFsdWUpIHsKICAgICAgICB0aGlzLnBheWxvYWQuZGF0ZUZyb20gPSB0aGlzLm10ZEZvcm1hdERhdGUodmFsdWUpOwogICAgICB9LAogICAgfSwKICAgIGNwdGRSZXF1aXJlZFJ1bGUoKSB7CiAgICAgIHJldHVybiAodikgPT4gewogICAgICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGVvZiB2ID09PSAnbnVtYmVyJyAmJiB2ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAhIXYgfHwgJ0NhbXBvIG9icmlnYXTDs3Jpbyc7CiAgICAgIH07CiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["Schedule.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Schedule.vue","sourceRoot":"src/app/schedule","sourcesContent":["<template>\n    <v-form\n      ref=\"form\"\n      v-model=\"formValid\"\n      @submit.prevent=\"mtdSave()\"\n    >\n      <v-container>\n        <v-alert\n          v-model=\"alert\"\n          close-text=\"Fechar\"\n          color=\"#574b90\"\n          dark\n          dismissible\n        >\n          Criação de atividade esportiva\n        </v-alert>\n        <v-alert\n          v-if=\"error\"\n          close-text=\"Fechar\"\n          color=\"red lighten-2\"\n          dark\n          dismissible\n        >\n          {{ error }}\n        </v-alert>        \n        <v-layout column>\n          <v-row>\n            <v-col cols=\"12\" sm=\"12\">\n            <span>Evento</span>\n              <v-text-field\n                v-model=\"payload.strName\"\n                outlined\n                :rules=\"[cptdRequiredRule]\"\n                clearable\n              />\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col cols=\"12\" sm=\"12\">\n              <span>Descrição</span>\n              <v-textarea\n                v-model=\"payload.textDescription\"\n                outlined\n                :rules=\"[cptdRequiredRule]\"\n                clearable\n              />\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col cols=\"3\">\n              <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                  <span>De:</span>\n\n                    <v-menu\n                      ref=\"menuInitialDate\"\n                      v-model=\"menuInitialDate\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on, attrs }\">\n                        <v-text-field\n                          v-model=\"cptdDateFormatted\"\n                          label=\"Data inicial\"\n                          prepend-icon=\"mdi-calendar\"\n                          readonly\n                          v-bind=\"attrs\"\n                          outlined\n                          v-on=\"on\"\n                          :rules=\"[cptdRequiredRule]\"\n                          clearable\n                        />\n                      </template>\n                      <v-date-picker\n                        v-model=\"payload.dateFrom\"\n                        scrollable\n                        @input=\"menuInitialDate = false\"\n                      />\n                    </v-menu>\n                </v-col>\n                <v-col cols=\"12\" sm=\"12\">\n                  <v-row>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <span>Início</span>\n                      <time-input v-model=\"payload.strStartTime\" :rules=\"[cptdRequiredRule]\"/>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <span>Término</span>\n                      <time-input \n                        v-model=\"payload.strEndTime\" \n                        :rules=\"[ cptdMinTimeRule, cptdRequiredRule ]\"\n                        clearable\n                      />\n                    </v-col>\n                  </v-row>\n                </v-col>\n              </v-row>\n            </v-col>\n\n            <v-col cols=\"3\">\n              <v-row>\n                <v-col cols=\"12\" sm=\"12\">\n                  <v-radio-group v-model=\"boolRecurrent\" @change=\"mtdResetInterval()\">\n                    <v-radio\n                      label='Não se repete'\n                      :value=\"false\"\n                    />\n                    <v-radio\n                      label=\"Repetir\"\n                      :value=\"true\"\n                    />\n                  </v-radio-group>\n                </v-col>\n                <v-col cols=\"12\" sm=\"12\">\n                  <span>Intervalo de semanas: {{ payload.intWeeklyRecurrence }}</span>\n                  <v-slider\n                    v-model=\"payload.intWeeklyRecurrence\"\n                    max=\"10\"\n                    min=\"0\"\n                    :disabled=\"!boolRecurrent\"\n                    :loader-height=\"5\"\n                  />\n                </v-col>\n              </v-row>\n            </v-col>\n          </v-row>                   \n        </v-layout>\n        <v-card class=\"elevation-0\">\n          <v-divider />\n          <div\n            class=\"pa-4 d-flex justify-end align-center\"\n          >\n            <div>\n              <v-btn\n                id=\"btnCancelar\"\n                color=\"#6A6E7B\"\n                outlined\n                @click=\"mtdClearForm\"\n              >\n                CANCELAR\n              </v-btn>\n            </div>\n            <div\n              class=\"ml-2\"\n            >\n              <v-btn\n                id=\"btnSalvar\"\n                class=\"white--text\"\n                type=\"submit\"\n                color=\"#786fa6\"\n                :loading=\"loadingForm\"\n              >\n                SALVAR\n              </v-btn>\n            </div>\n          </div>\n        </v-card>\n        <vue-cal\n          xsmall\n          show-week-numbers\n          :time-from=\"from\"\n          :time-to=\"to\"\n          :disable-views=\"['years', 'year']\"\n          :special-hours=\"specialHours\"\n          :events=\"events\"\n          locale=\"pt-br\"\n          startWeekOnSunday\n          class=\"mb-8\"\n        />\n      </v-container>\n    </v-form>\n</template>\n\n<script>\n\nimport TimeInput from 'App/schedule/components/TimeInput.vue';\nimport Moment from 'moment';\nimport VueCal from 'vue-cal';\nimport ScheduleRequest from '@/domain/schedule/ScheduleRequest';\n\nexport default {\n  name: 'Schedule',\n  components: { TimeInput, VueCal },\n  data: () => ({\n      menuInitialDate: false,\n      alert: true,\n      loadingForm: false,\n      formValid: false,\n      payload: {\n        strName: '',\n        textDescription: '',\n        dateFrom: '',\n        strStartTime: '',\n        strEndTime: '',\n        intWeeklyRecurrence: 0,\n      },\n      boolRecurrent: false,\n      events: [],\n      from: 0 * 60,\n      to: 23 * 60,\n      dailyHours: {},\n      specialHours: {},\n      error: '',\n  }),\n  created () {\n\n    this.mtdGetEvents();\n    this.dailyHours = { from: this.from, to: this.to, class: 'business-hours' };\n    this.specialHours = {\n        1: this.dailyHours,\n        2: this.dailyHours,\n        3: this.dailyHours,\n        4: this.dailyHours,\n        5: this.dailyHours,\n        6: this.dailyHours,\n        7: this.dailyHours,\n      };\n  },\n  methods: {\n    mtdGetEvents() {\n      const loader = this.$loading.show();\n      ScheduleRequest\n        .list()\n        .then(({ data }) => {\n          this.events = data.content;\n        })\n        .catch((response) => {\n          this.error = response;\n        })\n        .finally(() => {\n          loader.hide();\n        });    \n    },\n    mtdResetInterval() {\n      this.payload.intWeeklyRecurrence = 0;\n    },\n    mtdFormatDate(date) {\n      if (!date) {\n        return null;\n      }\n      const [year, month, day] = date.split('-');\n      return `${day}/${month}/${year}`;\n    },\n    mtdValidateForm() {\n      return this.$refs.form.validate();\n    },\n    mtdSave() {               \n\n      if (!this.mtdValidateForm()) {\n        return;\n      }\n      const loader = this.$loading.show();        \n\n      ScheduleRequest\n        .save(this.payload)\n        .then(() => {\n          this.mtdGetEvents();\n          this.mtdClearForm();\n          this.$toasted.success('Registro salvo com sucesso!!!', {position: \"top-center\", duration : 5000}); \n        })\n        .catch((response) => {\n          this.error = response;\n        })\n        .finally(() => {\n          loader.hide();\n        });\n\n    },\n    mtdClearForm() {\n      this.$refs.form.reset();\n      this.boolRecurrent = false;\n      this.payload.intWeeklyRecurrence = 0;\n    }\n  },\n  computed: {\n    cptdMinTimeRule() {\n      return (value) => {\n        const comparison = this.payload.strStartTime;\n        const timeValue = Moment(value, 'HH:mm');\n        const minTimeValue = Moment(comparison, 'HH:mm');\n        if (minTimeValue.isAfter(timeValue)) {\n          return `O horário deve ser maior que ${comparison}`;\n        }\n        return true;\n      };\n    },\n    cptdDateFormatted: {\n      get() {\n        return this.mtdFormatDate(this.payload.dateFrom);\n      },\n      set(value) {\n        this.payload.dateFrom = this.mtdFormatDate(value);\n      },\n    },\n    cptdRequiredRule() {\n      return (v) => {\n        if (typeof v === 'boolean') {\n          return true;\n        }\n        if (typeof v === 'number' && v === 0) {\n          return true;\n        }\n\n        return !!v || 'Campo obrigatório';\n      };\n    },\n  },\n}\n</script>\n"]}]}